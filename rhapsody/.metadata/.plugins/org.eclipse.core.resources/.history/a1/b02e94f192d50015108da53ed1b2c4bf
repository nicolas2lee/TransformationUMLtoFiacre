[#package generateFiacreMain]
[#import generateProcess.*]
[#import generateComponent.*]

[#template public generateFiacre( p: fiacreMM.Program)]
[#file]generatedFiacre/${p.Name}.fcr[/#file]

[#foreach c : fiacreMM.Component in p.components]
	/*declare element type in FIFO*/
	[#foreach process in c.instances]
		[#foreach var in process.variables]
		[#if var.datatype.Name == "queue"]
			[#include genFIFOelemtype(var.datatype, process)]
		[/#if]
		[/#foreach]
	[/#foreach]
	/*declare FIFO*/
	[#foreach process in c.instances]
		[#include genProcessFIFO(process) ]
	[/#foreach]
	
	/*process*/
	[#foreach process : fiacreMM.Process in c.instances]
		[#include genProcess(process)]
	[/#foreach]
	/*Component*/
	[#include genComponent(c)]
[/#foreach]

[/#template]
