
	/*process*/
	Process Button_ex []

 (
					&requestFloor : int,
		)

	is
		states 
			Off,
			On
	init
		to Off

	from Off
		name is  
		body id getP_btn_con().gen(new receiveFromButton_Ex(params.requestFloor));
genFiacre2();
		codeFiacre is 
		to On
	from On
		name is  
		body id genFiacre1();
		codeFiacre is 
		to Off
		name is  
		body id genFiacre3();
		codeFiacre is 
		to Off

	Process ControllerSys []

 (
					&requestedTargetFloor : int,
					&requestedFloor : int,
		)

	is
		states 
			Wait,
			cabinMoved,
			cabinArrived,
			doorOpened,
			doorClosed,
			receiveRequestFromButtonEx,
			cabinBraked,
			recievedRequestFromCabin,
			waitDoorClosed
		var 
			exBtnFloor,
			currentFloor,
			isBusy,
			upordown,
			targetFloor,
			destFloor,
			loadedPassager
	init
		exBtnFloor := -1;
		currentFloor := 0;
		isBusy := false;
		upordown := 0;
		targetFloor := -1;
		destFloor := -1;
		loadedPassager := false;
		to Wait

	from Wait
		name is  
		body id exBtnFloor=params.requestedFloor;       
destFloor=exBtnFloor;
if (currentFloor < exBtnFloor){
	getP_con_win().gen(new goUp());   
	upordown=1;  
	sendToMeasureSensor(exBtnFloor);
}else{
	if (currentFloor == exBtnFloor) {
		//open the door         
		gen (new gotoOpenDoorDirectly());
	}else{
		getP_con_win().gen(new goDown()); 
		upordown=-1;  
		sendToMeasureSensor(exBtnFloor);
	}
}    
genFiacre5();
		codeFiacre is 
		to receiveRequestFromButtonEx
	from cabinMoved
		name is  
		body id sendStopToWinch();   
genFiacre1();
		codeFiacre is 
		to cabinArrived
		name is  
		body id currentFloor+=upordown;   
sendToMeasureSensor(destFloor);     
genFiacre9();
		codeFiacre is 
		to cabinMoved
	from cabinArrived
		name is  
		body id sendToWinchToStop();     
genFiacre7();
		codeFiacre is 
		to cabinBraked
	from doorOpened
		name is  
		body id closeDoor();
targetFloor=params.requestedTargetFloor;    
destFloor=targetFloor;     
genFiacre3();
		codeFiacre is 
		to doorClosed
		name is  
		body id closeDoor();     
genFiacre13();
		codeFiacre is 
		to waitDoorClosed
	from doorClosed
		name is  
		body id if (currentFloor < targetFloor){
	getP_con_win().gen(new goUp());   
	upordown=1; 
	
	sendToMeasureSensor(targetFloor);
}else{
	if (currentFloor == targetFloor) {
		//open the door         
		gen (new gotoOpenDoorDirectly());
	}else{
		getP_con_win().gen(new goDown()); 
		upordown=-1;  
		
		sendToMeasureSensor(targetFloor);
	}
} 
genFiacre4();
		codeFiacre is 
		to recievedRequestFromCabin
		name is  
		body id loadedPassager=false;         
genFiacre12();
		codeFiacre is 
		to Wait
	from receiveRequestFromButtonEx
		name is  
		body id currentFloor+=upordown;   
sendToMeasureSensor(destFloor);  
/*try {
    Thread.sleep(1000);                 //1000 milliseconds is one second.
} catch(InterruptedException ex) {
    Thread.currentThread().interrupt();
}*/       
genFiacre6();
		codeFiacre is 
		to cabinMoved
		name is  
		body id System.out.println("ready to open"); 
gen (new readyToOpenDoor());    
genFiacre8();
		codeFiacre is 
		to cabinBraked
	from cabinBraked
		name is  
		body id  openDoor();
 genFiacre2();
		codeFiacre is 
		to doorOpened
	from recievedRequestFromCabin
		name is  
		body id currentFloor+=upordown;   
loadedPassager=true;        
sendToMeasureSensor(destFloor);      
genFiacre10();
		codeFiacre is 
		to cabinMoved
		name is  
		body id gen(new readyToOpenDoor());                 
genFiacre11();
		codeFiacre is 
		to cabinBraked
	from waitDoorClosed
		name is  
		body id gen(new doneTask());       
genFiacre14();
		codeFiacre is 
		to doorClosed

	Process Winch []

 (
		)

	is
		states 
			Not_Going,
			Going_Up,
			Going_Down,
			receiveCabinBrakedFromControllerSys
		var 
			motor,
			frein,
			selector
	init
		motor := ;
		frein := ;
		selector := ;
		to Not_Going

	from Not_Going
		name is  
		body id sendGoUpToCabin();   
genFiacre1();
		codeFiacre is 
		to Going_Up
		name is  
		body id sendGoDownToCabin();  
genFiacre3();
		codeFiacre is 
		to Going_Down
	from Going_Up
		name is  
		body id sendBrakeToCabin();   
genFiacre4();
		codeFiacre is 
		to receiveCabinBrakedFromControllerSys
	from Going_Down
		name is  
		body id sendBrakeToCabin();        
genFiacre5();
		codeFiacre is 
		to receiveCabinBrakedFromControllerSys
	from receiveCabinBrakedFromControllerSys
		name is  
		body id receiveStopFromController();      
genFiacre2();
		codeFiacre is 
		to Not_Going

	Process Cabin []

 (
					&targetFloor : int,
		)

	is
		states 
			Stop,
			Down,
			sentInfo,
			Up
		var 
			currentFloor
	init
		currentFloor := 0;
		to Stop

	from Stop
		name is  
		body id getP_cab_con().gen (new receiveFloorAndCloseDoor(params.targetFloor));    
genFiacre2();
		codeFiacre is 
		to sentInfo
		name is  
		body id sendMovedDownToController();       
genFiacre4();
		codeFiacre is 
		to Down
		name is  
		body id sendMovedUpToController();   
genFiacre5();
		codeFiacre is 
		to Up
	from Down
		name is  
		body id sendCabinBrakedToController();                 
genFiacre1();
		codeFiacre is 
		to Stop
	from sentInfo
		name is  
		body id sendMovedDownToController();      
genFiacre3();
		codeFiacre is 
		to Down
		name is  
		body id sendMovedUpToController();         
genFiacre7();
		codeFiacre is 
		to Up
	from Up
		name is  
		body id sendCabinBrakedToController();  
genFiacre6();
		codeFiacre is 
		to Stop

	Process Door []

 (
		)

	is
		states 
			Open,
			Closed,
			Sleep
	init
		to Sleep

	from Open
		name is  
		body id genFiacre2();
		codeFiacre is 
		to Closed
	from Closed
		name is  
		body id goSleep();
genFiacre3();
		codeFiacre is 
		to Sleep
	from Sleep
		name is  
		body id genFiacre1();
		codeFiacre is 
		to Open

	Process Sensor []

 (
					&currentFloor : int,
					&sensorFloor : int,
					&currentFloor : int,
					&sensorFloor : int,
		)

	is
		states 
			Idle,
			Detecting,
			Detected
		var 
			floor,
			cabinFloor
	init
		floor := -1;
		cabinFloor := -1;
		to Idle

	from Idle
		name is  
		body id floor=params.sensorFloor;
cabinFloor=params.currentFloor;      
genFiacre0();
		codeFiacre is 
		to Detecting
	from Detecting
		name is  
		body id sendCabinArrived();     
genFiacre1();
		codeFiacre is 
		to Detected
		name is  
		body id cabinFloor=params.currentFloor; 
checkArrived();   
genFiacre4();
		codeFiacre is 
		to Detecting
	from Detected
		name is  
		body id genFiacre2();
		codeFiacre is 
		to Idle

	Process Sensor []

 (
					&currentFloor : int,
					&sensorFloor : int,
					&currentFloor : int,
					&sensorFloor : int,
		)

	is
		states 
			Idle,
			Detecting,
			Detected
		var 
			floor,
			cabinFloor
	init
		floor := -1;
		cabinFloor := -1;
		to Idle

	from Idle
		name is  
		body id floor=params.sensorFloor;
cabinFloor=params.currentFloor;      
genFiacre0();
		codeFiacre is 
		to Detecting
	from Detecting
		name is  
		body id sendCabinArrived();     
genFiacre1();
		codeFiacre is 
		to Detected
		name is  
		body id cabinFloor=params.currentFloor; 
checkArrived();   
genFiacre4();
		codeFiacre is 
		to Detecting
	from Detected
		name is  
		body id genFiacre2();
		codeFiacre is 
		to Idle

	Process Sensor []

 (
					&currentFloor : int,
					&sensorFloor : int,
					&currentFloor : int,
					&sensorFloor : int,
		)

	is
		states 
			Idle,
			Detecting,
			Detected
		var 
			floor,
			cabinFloor
	init
		floor := -1;
		cabinFloor := -1;
		to Idle

	from Idle
		name is  
		body id floor=params.sensorFloor;
cabinFloor=params.currentFloor;      
genFiacre0();
		codeFiacre is 
		to Detecting
	from Detecting
		name is  
		body id sendCabinArrived();     
genFiacre1();
		codeFiacre is 
		to Detected
		name is  
		body id cabinFloor=params.currentFloor; 
checkArrived();   
genFiacre4();
		codeFiacre is 
		to Detecting
	from Detected
		name is  
		body id genFiacre2();
		codeFiacre is 
		to Idle

	Process Sensor []

 (
					&currentFloor : int,
					&sensorFloor : int,
					&currentFloor : int,
					&sensorFloor : int,
		)

	is
		states 
			Idle,
			Detecting,
			Detected
		var 
			floor,
			cabinFloor
	init
		floor := -1;
		cabinFloor := -1;
		to Idle

	from Idle
		name is  
		body id floor=params.sensorFloor;
cabinFloor=params.currentFloor;      
genFiacre0();
		codeFiacre is 
		to Detecting
	from Detecting
		name is  
		body id sendCabinArrived();     
genFiacre1();
		codeFiacre is 
		to Detected
		name is  
		body id cabinFloor=params.currentFloor; 
checkArrived();   
genFiacre4();
		codeFiacre is 
		to Detecting
	from Detected
		name is  
		body id genFiacre2();
		codeFiacre is 
		to Idle

	Process Sensor []

 (
					&currentFloor : int,
					&sensorFloor : int,
					&currentFloor : int,
					&sensorFloor : int,
		)

	is
		states 
			Idle,
			Detecting,
			Detected
		var 
			floor,
			cabinFloor
	init
		floor := -1;
		cabinFloor := -1;
		to Idle

	from Idle
		name is  
		body id floor=params.sensorFloor;
cabinFloor=params.currentFloor;      
genFiacre0();
		codeFiacre is 
		to Detecting
	from Detecting
		name is  
		body id sendCabinArrived();     
genFiacre1();
		codeFiacre is 
		to Detected
		name is  
		body id cabinFloor=params.currentFloor; 
checkArrived();   
genFiacre4();
		codeFiacre is 
		to Detecting
	from Detected
		name is  
		body id genFiacre2();
		codeFiacre is 
		to Idle

	/*Component*/
	Component InstanceClsDiag is 
	par
	
	
			Button_ex,
			ControllerSys,
			Winch,
			Cabin,
			Door,
			Sensor,
			Sensor,
			Sensor,
			Sensor,
			Sensor
	

